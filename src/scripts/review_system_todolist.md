# แผนงานพัฒนาระบบรีวิวร้านค้า (Shop Review System To-Do List)

## 1. ฐานข้อมูล (Database)
- [ ] **ตรวจสอบโครงสร้างเดิม**: รันคำสั่ง SQL เพื่อดูตาราง `reviews` ปัจจุบัน
- [ ] **อัปเกรดตาราง**: รันคำสั่ง SQL เพื่อเพิ่มคอลัมน์ `status`, `comment`, `evidence_urls`, `ip_address`, `like_count` ในตาราง `reviews`
- [ ] **สร้างตารางใหม่**: สร้างตาราง `review_likes` และ `review_disputes`
- [ ] **ตั้งค่า RLS**: กำหนดสิทธิ์การเข้าถึงข้อมูล (Policy) ให้ถูกต้อง

## 2. พื้นที่จัดเก็บไฟล์ (Storage)
- [ ] **สร้าง Bucket**: สร้าง Public Bucket ชื่อ `review-evidence` ใน Supabase Storage
- [ ] **ตั้งค่า Policy**: อนุญาตให้ Authenticated User อัปโหลดรูปภาพได้ (แต่ลบไม่ได้) และ Public อ่านได้

## 3. ส่วนหน้าบ้าน (Frontend)
- [ ] **ปุ่มรีวิว**: เพิ่มปุ่ม "เขียนรีวิว" ในหน้า `ShopProfilePage` (แสดงเฉพาะเมื่อ Login)
- [ ] **แบบฟอร์มรีวิว (Modal)**:
    - [ ] ระบบให้คะแนน (ดาว)
    - [ ] ช่องกรอกข้อความรีวิว
    - [ ] ระบบอัปโหลดรูปภาพ (สูงสุด 5 รูป)
    - [ ] Checkbox ยอมรับเงื่อนไข (Terms & Conditions)
- [ ] **รายการรีวิว (Review List)**:
    - [ ] แสดงชื่อผู้รีวิวแบบเซ็นเซอร์ (เช่น Som***)
    - [ ] แสดงป้ายกำกับ "เช่าจริง" (Verified Rental) - *ถ้าเชื่อมโยงข้อมูลการจองได้*
    - [ ] ปุ่มดูรูปภาพหลักฐาน (Lightbox)
    - [ ] ปุ่ม Like และแสดงจำนวน
- [ ] **ระบบแจ้งเตือน**: แจ้งเตือนเมื่อส่งรีวิวสำเร็จ ("รอการตรวจสอบ")

## 4. ส่วนหลังบ้าน (Backend API)
- [ ] **POST /api/reviews**: API สำหรับบันทึกรีวิว, บันทึก IP, และอัปโหลดรูปภาพ
- [ ] **POST /api/reviews/like**: API สำหรับกด Like (เช็ค IP ซ้ำ)
- [ ] **POST /api/reviews/dispute**: API สำหรับส่งคำร้องโต้แย้งรีวิว

## 5. ส่วนผู้ดูแลระบบ (Admin Dashboard)
- [ ] **หน้าอนุมัติรีวิว**: รายการรีวิวที่รอตรวจสอบ (Pending) พร้อมปุ่ม Approve/Reject
- [ ] **หน้าจัดการข้อพิพาท**: รายการคำร้องโต้แย้งจากร้านค้า พร้อมเครื่องมือตัดสิน

## 6. ส่วนเจ้าของร้าน (Shop Owner)
- [ ] **ปุ่มโต้แย้ง**: ปุ่ม "แจ้งลบ/โต้แย้ง" ในการ์ดรีวิว (เห็นเฉพาะเจ้าของร้าน)
- [ ] **ฟอร์มโต้แย้ง**: ระบุเหตุผลที่ต้องการให้ลบรีวิว
